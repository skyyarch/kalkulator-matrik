<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Matriks</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        label {
            font-weight: bold;
            color: #555;
        }
        
        select, input, button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        button {
            background-color: #007bff;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        .matrix-container {
            display: flex;
            gap: 40px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .matrix {
            display: inline-block;
            border: 2px solid #333;
            padding: 10px;
            background: white;
        }
        
        .matrix-input {
            width: 50px;
            height: 30px;
            text-align: center;
            margin: 2px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        
        .result-matrix {
            border: 2px solid #28a745;
            padding: 10px;
            background: #f8fff9;
        }
        
        .operation-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .operation-buttons button {
            background-color: #28a745;
            font-size: 12px;
            padding: 6px 12px;
        }
        
        .operation-buttons button:hover {
            background-color: #1e7e34;
        }
        
        .result-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .error {
            color: #dc3545;
            background: #f8d7da;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .success {
            color: #155724;
            background: #d4edda;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Kalkulator Matriks</h1>
        
        <div class="controls">
            <div class="control-group">
                <label>Baris:</label>
                <input type="number" id="rows" min="1" max="10" value="3">
            </div>
            <div class="control-group">
                <label>Kolom:</label>
                <input type="number" id="cols" min="1" max="10" value="3">
            </div>
            <button onclick="createMatrices()">Buat Matriks</button>
            <button onclick="clearAll()">Bersihkan</button>
        </div>
        
        <div class="matrix-container">
            <div>
                <h3>Matriks A</h3>
                <div id="matrixA" class="matrix"></div>
            </div>
            <div>
                <h3>Matriks B</h3>
                <div id="matrixB" class="matrix"></div>
            </div>
        </div>
        
        <div class="operation-buttons">
            <button onclick="performOperation('add')">A + B</button>
            <button onclick="performOperation('subtract')">A - B</button>
            <button onclick="performOperation('multiply')">A × B</button>
            <button onclick="performOperation('transposeA')">Transpose A</button>
            <button onclick="performOperation('transposeB')">Transpose B</button>
            <button onclick="performOperation('determinantA')">Determinan A</button>
            <button onclick="performOperation('determinantB')">Determinan B</button>
            <button onclick="performOperation('inverseA')">Invers A</button>
            <button onclick="performOperation('inverseB')">Invers B</button>
        </div>
        
        <div class="result-section">
            <h3>Hasil</h3>
            <div id="result"></div>
        </div>
    </div>

    <script>
        let currentRows = 3;
        let currentCols = 3;

        function createMatrices() {
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);
            
            if (rows < 1 || rows > 10 || cols < 1 || cols > 10) {
                showError("Ukuran matriks harus antara 1-10");
                return;
            }
            
            currentRows = rows;
            currentCols = cols;
            
            createMatrix('matrixA', rows, cols, 'A');
            createMatrix('matrixB', rows, cols, 'B');
            document.getElementById('result').innerHTML = '';
        }

        function createMatrix(containerId, rows, cols, prefix) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const input = document.createElement('input');
                    input.type = 'number';
                    input.className = 'matrix-input';
                    input.id = `${prefix}${i}${j}`;
                    input.value = Math.floor(Math.random() * 10);
                    container.appendChild(input);
                }
                container.appendChild(document.createElement('br'));
            }
        }

        function getMatrix(prefix, rows, cols) {
            const matrix = [];
            for (let i = 0; i < rows; i++) {
                const row = [];
                for (let j = 0; j < cols; j++) {
                    const value = parseFloat(document.getElementById(`${prefix}${i}${j}`).value) || 0;
                    row.push(value);
                }
                matrix.push(row);
            }
            return matrix;
        }

        function setMatrix(matrix, prefix) {
            const rows = matrix.length;
            const cols = matrix[0].length;
            
            let html = '';
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    html += `<input type="number" class="matrix-input" value="${matrix[i][j]}" readonly>`;
                }
                html += '<br>';
            }
            return html;
        }

        function performOperation(operation) {
            try {
                let result;
                let message = '';
                
                switch(operation) {
                    case 'add':
                        if (currentRows !== currentCols) {
                            showError("Penjumlahan membutuhkan ukuran matriks yang sama");
                            return;
                        }
                        const A = getMatrix('A', currentRows, currentCols);
                        const B = getMatrix('B', currentRows, currentCols);
                        result = addMatrices(A, B);
                        message = 'Hasil Penjumlahan A + B:';
                        break;
                        
                    case 'subtract':
                        if (currentRows !== currentCols) {
                            showError("Pengurangan membutuhkan ukuran matriks yang sama");
                            return;
                        }
                        const A_sub = getMatrix('A', currentRows, currentCols);
                        const B_sub = getMatrix('B', currentRows, currentCols);
                        result = subtractMatrices(A_sub, B_sub);
                        message = 'Hasil Pengurangan A - B:';
                        break;
                        
                    case 'multiply':
                        const A_mul = getMatrix('A', currentRows, currentCols);
                        const B_mul = getMatrix('B', currentRows, currentCols);
                        result = multiplyMatrices(A_mul, B_mul);
                        message = 'Hasil Perkalian A × B:';
                        break;
                        
                    case 'transposeA':
                        const A_trans = getMatrix('A', currentRows, currentCols);
                        result = transposeMatrix(A_trans);
                        message = 'Transpose Matriks A:';
                        break;
                        
                    case 'transposeB':
                        const B_trans = getMatrix('B', currentRows, currentCols);
                        result = transposeMatrix(B_trans);
                        message = 'Transpose Matriks B:';
                        break;
                        
                    case 'determinantA':
                        if (currentRows !== currentCols) {
                            showError("Determinan hanya untuk matriks persegi");
                            return;
                        }
                        const A_det = getMatrix('A', currentRows, currentCols);
                        result = determinant(A_det);
                        message = `Determinan Matriks A: ${result}`;
                        break;
                        
                    case 'determinantB':
                        if (currentRows !== currentCols) {
                            showError("Determinan hanya untuk matriks persegi");
                            return;
                        }
                        const B_det = getMatrix('B', currentRows, currentCols);
                        result = determinant(B_det);
                        message = `Determinan Matriks B: ${result}`;
                        break;
                        
                    case 'inverseA':
                        if (currentRows !== currentCols) {
                            showError("Invers hanya untuk matriks persegi");
                            return;
                        }
                        const A_inv = getMatrix('A', currentRows, currentCols);
                        const detA = determinant(A_inv);
                        if (detA === 0) {
                            showError("Matriks A tidak memiliki invers (determinan = 0)");
                            return;
                        }
                        result = inverseMatrix(A_inv);
                        message = 'Invers Matriks A:';
                        break;
                        
                    case 'inverseB':
                        if (currentRows !== currentCols) {
                            showError("Invers hanya untuk matriks persegi");
                            return;
                        }
                        const B_inv = getMatrix('B', currentRows, currentCols);
                        const detB = determinant(B_inv);
                        if (detB === 0) {
                            showError("Matriks B tidak memiliki invers (determinan = 0)");
                            return;
                        }
                        result = inverseMatrix(B_inv);
                        message = 'Invers Matriks B:';
                        break;
                }
                
                if (Array.isArray(result)) {
                    document.getElementById('result').innerHTML = `
                        <p class="success">${message}</p>
                        <div class="result-matrix">${setMatrix(result, 'R')}</div>
                    `;
                } else {
                    document.getElementById('result').innerHTML = `
                        <p class="success">${message}</p>
                    `;
                }
                
            } catch (error) {
                showError("Terjadi kesalahan: " + error.message);
            }
        }

        function addMatrices(A, B) {
            const rows = A.length;
            const cols = A[0].length;
            const result = [];
            
            for (let i = 0; i < rows; i++) {
                const row = [];
                for (let j = 0; j < cols; j++) {
                    row.push(A[i][j] + B[i][j]);
                }
                result.push(row);
            }
            return result;
        }

        function subtractMatrices(A, B) {
            const rows = A.length;
            const cols = A[0].length;
            const result = [];
            
            for (let i = 0; i < rows; i++) {
                const row = [];
                for (let j = 0; j < cols; j++) {
                    row.push(A[i][j] - B[i][j]);
                }
                result.push(row);
            }
            return result;
        }

        function multiplyMatrices(A, B) {
            const rowsA = A.length;
            const colsA = A[0].length;
            const rowsB = B.length;
            const colsB = B[0].length;
            
            if (colsA !== rowsB) {
                throw new Error("Jumlah kolom A harus sama dengan jumlah baris B");
            }
            
            const result = [];
            for (let i = 0; i < rowsA; i++) {
                const row = [];
                for (let j = 0; j < colsB; j++) {
                    let sum = 0;
                    for (let k = 0; k < colsA; k++) {
                        sum += A[i][k] * B[k][j];
                    }
                    row.push(sum);
                }
                result.push(row);
            }
            return result;
        }

        function transposeMatrix(matrix) {
            const rows = matrix.length;
            const cols = matrix[0].length;
            const result = [];
            
            for (let i = 0; i < cols; i++) {
                const row = [];
                for (let j = 0; j < rows; j++) {
                    row.push(matrix[j][i]);
                }
                result.push(row);
            }
            return result;
        }

        function determinant(matrix) {
            const n = matrix.length;
            if (n === 1) return matrix[0][0];
            if (n === 2) return matrix[0][0] * matrix[1][1] - matrix[0][1] * matrix[1][0];
            
            let det = 0;
            for (let i = 0; i < n; i++) {
                det += matrix[0][i] * cofactor(matrix, 0, i);
            }
            return det;
        }

        function cofactor(matrix, row, col) {
            const subMatrix = [];
            const n = matrix.length;
            
            for (let i = 0; i < n; i++) {
                if (i === row) continue;
                const newRow = [];
                for (let j = 0; j < n; j++) {
                    if (j === col) continue;
                    newRow.push(matrix[i][j]);
                }
                subMatrix.push(newRow);
            }
            
            return ((row + col) % 2 === 0 ? 1 : -1) * determinant(subMatrix);
        }

        function inverseMatrix(matrix) {
            const det = determinant(matrix);
            if (det === 0) throw new Error("Matriks tidak memiliki invers");
            
            const n = matrix.length;
            const adjugate = [];
            
            for (let i = 0; i < n; i++) {
                const row = [];
                for (let j = 0; j < n; j++) {
                    row.push(cofactor(matrix, j, i));
                }
                adjugate.push(row);
            }
            
            const result = [];
            for (let i = 0; i < n; i++) {
                const row = [];
                for (let j = 0; j < n; j++) {
                    row.push(adjugate[i][j] / det);
                }
                result.push(row);
            }
            
            return result;
        }

        function showError(message) {
            document.getElementById('result').innerHTML = `<div class="error">${message}</div>`;
        }

        function clearAll() {
            document.getElementById('matrixA').innerHTML = '';
            document.getElementById('matrixB').innerHTML = '';
            document.getElementById('result').innerHTML = '';
            document.getElementById('rows').value = 3;
            document.getElementById('cols').value = 3;
            currentRows = 3;
            currentCols = 3;
        }

        // Inisialisasi awal
        createMatrices();
    </script>
</body>
</html>
